version: '3.8'

services:
  claude-command-center:
    build:
      context: .
      dockerfile: Dockerfile
    container_name: claude-command-center
    ports:
      - "1420:1420"
    volumes:
      # Mount common CLI installation paths from host
      - /usr/local/bin:/host/usr/local/bin:ro
      - /usr/bin:/host/usr/bin:ro
      - /bin:/host/bin:ro
      # Mount user-specific paths (adjust ~ to your actual home path)
      - ${HOME}/.local/bin:/host/home/.local/bin:ro
      - ${HOME}/.cargo/bin:/host/home/.cargo/bin:ro
      - ${HOME}/.bun/bin:/host/home/.bun/bin:ro
      # Mount working directories if you want to access host files
      - ${HOME}/Documents:/workspace:rw
      # Mount home directory for skills access (~/.claude/skills)
      - ${HOME}:/host/home:ro
    environment:
      - DISPLAY=${DISPLAY:-:0}
      - RUST_LOG=info
      # Add any other environment variables needed
    network_mode: host
    # For GUI support (optional, comment out if not needed)
    # devices:
    #   - /dev/dri:/dev/dri
    # volumes:
    #   - /tmp/.X11-unix:/tmp/.X11-unix:rw
    restart: unless-stopped
